.icon-envelope {
  display: inline-block;
  cursor: pointer;
  user-select: none;
}
.icon-envelope.unavailable {
  opacity: 0.75;
  cursor: not-allowed;
}
.icon-envelope:focus {
  outline: none;
}
.icon-envelope:focus-visible {
  outline: 3px solid rgba(59, 130, 246, 0.35);
  border-radius: 8px;
}

.icons {
  position: relative;
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.closed-icon,
.open-icon {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transition: transform 280ms cubic-bezier(0.2, 0.9, 0.2, 1), opacity 240ms;
  color: #4c51bf;
}
.closed-icon {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}
.open-icon {
  opacity: 0;
  transform: translate(-50%, -40%) scale(0.95);
}

.icon-envelope.open .closed-icon {
  opacity: 0;
  transform: translate(-50%, -60%) scale(0.9);
}
.icon-envelope.open .open-icon {
  opacity: 1;
  /* move the open icon up a couple pixels for a subtle lift during the transition */
  transform: translate(-50%, -62%) scale(1);
  transition-delay: 120ms;
}

/* the letter that will pop out of the open icon */
.letter {
  position: absolute;
  left: 50%;
  top: 22%;
  width: 28px;
  height: 36px;
  transform: translateX(-50%) translateY(6px) scale(0.92);
  background: #fffbe6;
  border: 1px solid #e3dcb2;
  border-radius: 4px;
  box-shadow: 0 6px 16px rgba(12, 22, 52, 0.12);
  opacity: 0;
  pointer-events: none;
  z-index: 8;
  /* transition present on the base element so BOTH open and close are smooth.
     We add a transition-delay only when opening so the pop feels natural,
     but closing will not wait and will animate immediately. */
  transition: transform 420ms cubic-bezier(0.2, 0.9, 0.2, 1),
    opacity 240ms ease-in-out;
}
.letter .letter-lines {
  width: 60%;
  height: 2px; /* smaller rule lines inside the paper */
  background: linear-gradient(#e4d9b4, #e4d9b4);
  opacity: 0.8;
  margin: 8px auto;
  border-radius: 2px;
}

/* badge styling for showing envelope number */
.badge {
  position: absolute;
  top: -10%;
  right: -10%;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: #bf4c4c;
  color: white;
  font-size: 12px;
  font-weight: 700;
  border-radius: 999px;
  box-shadow: 0 2px 6px rgba(12, 22, 52, 0.12);
  z-index: 12;
}

/* Make icon strokes (if present) thinner. Font Awesome icons are SVGs; some
   shapes are filled while others use strokes. This attempts to reduce visible
   'line' thickness inside the icons. We use path selector and !important to
   override inline presentation attributes when necessary. */
.closed-icon svg path,
.open-icon svg path {
  stroke-width: 0.9 !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
}

/* If the icons are using 'stroke' instead of fill, ensure they inherit color */
.closed-icon svg,
.open-icon svg {
  stroke: currentColor;
  fill: currentColor; /* keep default fill, but stroke adjustments above will apply when used */
}

/* animate the letter only when .open is present (prevents initial pop) */
.icon-envelope.open .letter {
  /* when opening, delay the pop slightly so it feels like it emerges after
     the open-icon finishes settling. Closing won't use this delay because
     transition-delay is only applied in the open state. */
  transition-delay: 180ms;
  transform: translateX(-50%) translateY(-46px) scale(1);
  opacity: 1;
}

.unavailable-x {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 64px;
  font-weight: 900;
  color: #dc2626;
  opacity: 0.9;
  pointer-events: none;
  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  z-index: 20;
}
